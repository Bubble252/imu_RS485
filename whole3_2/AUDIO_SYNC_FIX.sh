#!/bin/bash
# éŸ³é¢‘åŒæ­¥æµ‹è¯•è„šæœ¬

echo "========================================================================"
echo "éŸ³é¢‘åŒæ­¥ä¼˜åŒ–è¯´æ˜"
echo "========================================================================"
echo ""
echo "é—®é¢˜è¯Šæ–­:"
echo "  âŒ åŸé—®é¢˜: éŸ³é¢‘é‡‡é›†é€Ÿåº¦ 16.67fps >> è§†é¢‘å‘é€é€Ÿåº¦ 7.9fps"
echo "  âŒ ç»“æœ: éŸ³é¢‘é˜Ÿåˆ—ç»å¸¸æ»¡(5/5)ï¼Œæ’­æ”¾æ–­æ–­ç»­ç»­"
echo ""
echo "è§£å†³æ–¹æ¡ˆ:"
echo "  âœ… å¢åŠ éŸ³é¢‘é˜Ÿåˆ—å¤§å°: 5 â†’ 20 å¸§"
echo "  âœ… æ‰¹é‡æ‰“åŒ…: æ¯ä¸ªè§†é¢‘å¸§æºå¸¦ 2 ä¸ªéŸ³é¢‘å¸§"
echo "  âœ… éŸ³é¢‘å—å¤§å°: 60ms â†’ 125ms (åŒ¹é…è§†é¢‘å¸§é—´éš”)"
echo ""
echo "========================================================================"
echo "é¢„æœŸæ•ˆæœ"
echo "========================================================================"
echo ""
echo "C ç«¯è¾“å‡º (C_real_video_audio_fixed.py):"
echo "  [æ•°æ®çº¿ç¨‹] å·²å‘é€ 100 å¸§, FPS: 7.9, è§†é¢‘: 6900B, æœ‰éŸ³é¢‘x2(ç´¯è®¡200), éŸ³é¢‘é˜Ÿåˆ—: 3/20"
echo "                                                          ^^^            ^^^"
echo "                                                    æ¯å¸§2ä¸ªéŸ³é¢‘     é˜Ÿåˆ—ä¸æ»¡"
echo ""
echo "A ç«¯è¾“å‡º (triple_imu_rs485_publisher_dual_cam_UI_voice.py):"
echo "  ğŸ”Š éŸ³é¢‘æ¥æ”¶: 200 å¸§ (æ‰¹é‡x2), é˜Ÿåˆ—: 3/5"
echo "                      ^^^^^^^^"
echo "                  æ‰¹é‡æ¥æ”¶"
echo ""
echo "========================================================================"
echo "æµ‹è¯•æ­¥éª¤"
echo "========================================================================"
echo ""
echo "1. ç¡®è®¤å·²éƒ¨ç½² B_reverse_whole_voice.py åˆ°æœåŠ¡å™¨"
echo "   ./deploy_voice_to_target_server.sh"
echo ""
echo "2. æ›¿æ¢ C ç«¯æ–‡ä»¶:"
echo "   cd ~/æ¡Œé¢/WIT_RS485/whole3_2"
echo "   cp C_real_video_audio.py C_real_video_audio_backup.py  # å¤‡ä»½"
echo "   cp C_real_video_audio_fixed.py C_real_video_audio.py   # ä½¿ç”¨ä¿®å¤ç‰ˆ"
echo ""
echo "3. å¯åŠ¨ä¸‰ç«¯æµ‹è¯•:"
echo ""
echo "   ç»ˆç«¯1 - B ç«¯:"
echo "   ./connect.sh"
echo "   cd /data7/yhx/lerobot_data_collection"
echo "   ./start_b_voice.sh"
echo ""
echo "   ç»ˆç«¯2 - C ç«¯:"
echo "   cd ~/æ¡Œé¢/WIT_RS485/whole3_2"
echo "   python C_real_video_audio.py"
echo ""
echo "   ç»ˆç«¯3 - A ç«¯:"
echo "   cd ~/æ¡Œé¢/WIT_RS485"
echo "   python triple_imu_rs485_publisher_dual_cam_UI_voice.py \\"
echo "       --online-only \\"
echo "       --b-host localhost --b-port 5555 \\"
echo "       --enable-video --video-host localhost --video-port 5557 \\"
echo "       -p /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0 \\"
echo "       --enable-debug --debug-port 5560 \\"
echo "       --enable-audio"
echo ""
echo "4. å¯¹ç€ C ç«¯éº¦å…‹é£è¯´è¯ï¼Œè§‚å¯Ÿ:"
echo "   - C ç«¯: 'æœ‰éŸ³é¢‘x2' è€Œä¸æ˜¯ 'æœ‰éŸ³é¢‘x1'"
echo "   - C ç«¯: 'éŸ³é¢‘é˜Ÿåˆ—' åº”è¯¥ç¨³å®šåœ¨è¾ƒä½å€¼ï¼ˆ<10ï¼‰"
echo "   - A ç«¯: æ’­æ”¾åº”è¯¥æµç•…ï¼Œä¸å†æ–­æ–­ç»­ç»­"
echo ""
echo "========================================================================"
echo "æ•…éšœæ’æŸ¥"
echo "========================================================================"
echo ""
echo "å¦‚æœè¿˜æ˜¯æ–­ç»­:"
echo "  1. æ£€æŸ¥ C ç«¯éŸ³é¢‘é˜Ÿåˆ—æ˜¯å¦è¿˜ç»å¸¸æ»¡ â†’ å¦‚æœæ˜¯ï¼Œå¢åŠ  AUDIO_FRAMES_PER_VIDEO"
echo "  2. æ£€æŸ¥ A ç«¯éŸ³é¢‘ç¼“å†²é˜Ÿåˆ— â†’ å¦‚æœç»å¸¸æ»¡ï¼Œå¢åŠ  AUDIO_BUFFER_SIZE"
echo "  3. æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ â†’ ping localhost (åº”è¯¥ <1ms)"
echo ""
echo "å¦‚æœ C ç«¯æ²¡æœ‰éŸ³é¢‘:"
echo "  1. æµ‹è¯•éº¦å…‹é£: python test_audio_loopback.py"
echo "  2. æ£€æŸ¥éŸ³é‡: alsamixer"
echo "  3. æŸ¥çœ‹ C ç«¯æ˜¯å¦æ˜¾ç¤º '[éŸ³é¢‘å›è°ƒ] Opus ç¼–ç å™¨å·²åˆ›å»º'"
echo ""
echo "========================================================================"
echo ""
echo "æŠ€æœ¯ç»†èŠ‚:"
echo "  - éŸ³é¢‘é‡‡æ ·ç‡: 48000 Hz (è®¾å¤‡æ”¯æŒ)"
echo "  - Opus å¸§å¤§å°: 2880 æ ·æœ¬ = 60ms"
echo "  - è§†é¢‘å¸§ç‡: ~8 fps = 125ms/å¸§"
echo "  - éŸ³é¢‘æ‰¹é‡: 125ms â‰ˆ 2 x 60ms"
echo "  - é˜Ÿåˆ—å®¹é‡: 20 å¸§ = 1.2 ç§’ç¼“å†²"
echo ""
