# IMUåŒæ‘„åƒå¤´å¯è§†åŒ–æŸ¥çœ‹å™¨ (PyQt5)

ä¸“ä¸šçš„æœºæ¢°è‡‚IMUæ•°æ®å’ŒåŒæ‘„åƒå¤´å®æ—¶å¯è§†åŒ–å·¥å…·ï¼Œä½¿ç”¨PyQt5+PyQtGraphæ„å»ºã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **åŒæ‘„åƒå¤´å®æ—¶æ˜¾ç¤º**ï¼šåŒæ—¶æ˜¾ç¤ºleft_wristå’Œtopæ‘„åƒå¤´ç”»é¢
- âœ… **3Dè½¨è¿¹å¯è§†åŒ–**ï¼šOpenGLåŠ é€Ÿçš„æœºæ¢°è‡‚æœ«ç«¯è½¨è¿¹æ˜¾ç¤º
- âœ… **IMUæ•°æ®ç›‘æ§**ï¼šå®æ—¶æ˜¾ç¤º3ä¸ªIMUçš„å§¿æ€è§’ï¼ˆpitch/roll/yawï¼‰
- âœ… **å®æ—¶æ›²çº¿å›¾**ï¼šæ˜¾ç¤ºæœ€è¿‘100ä¸ªæ•°æ®ç‚¹çš„å§¿æ€è§’å˜åŒ–
- âœ… **å¤¹çˆªçŠ¶æ€**ï¼šè¿›åº¦æ¡æ˜¾ç¤ºå¤¹çˆªå¼€åˆåº¦
- âœ… **è¿æ¥çŠ¶æ€**ï¼šå®æ—¶æ˜¾ç¤ºIMUåœ¨çº¿/ç¦»çº¿çŠ¶æ€
- âœ… **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºè½¨è¿¹æ•°æ®ï¼ˆå¾…å®ç°ï¼‰

### æŠ€æœ¯ä¼˜åŠ¿
- ğŸš€ **é›¶ä¾µå…¥ä¸»ç¨‹åº**ï¼šé€šè¿‡ZMQè®¢é˜…5560ç«¯å£ï¼Œä¸»ç¨‹åºæ— éœ€ä¿®æ”¹
- ğŸ”§ **ç‹¬ç«‹è¿›ç¨‹**ï¼šUIå´©æºƒä¸å½±å“ä¸»ç¨‹åºï¼Œè°ƒè¯•æ–¹ä¾¿
- âš¡ **é«˜æ€§èƒ½æ¸²æŸ“**ï¼šPyQtGraphç¡¬ä»¶åŠ é€Ÿï¼Œ60fpsæµç•…æ˜¾ç¤º
- ğŸ¨ **ç°ä»£åŒ–UI**ï¼šä¸“ä¸šé…è‰²ï¼Œæ¸…æ™°å¸ƒå±€
- ğŸ”Œ **è‡ªåŠ¨é‡è¿**ï¼šç½‘ç»œä¸­æ–­åè‡ªåŠ¨æ¢å¤è¿æ¥

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬è‡ªåŠ¨å®‰è£…
cd /home/bubble/æ¡Œé¢/WIT_RS485/pyqt5_viewer
./start_viewer.sh

# æ–¹æ³•2: æ‰‹åŠ¨å®‰è£…
pip3 install PyQt5 pyqtgraph PyOpenGL pyzmq opencv-python numpy
```

### 2. å¯åŠ¨ä¸»ç¨‹åºï¼ˆå‘å¸ƒç«¯ï¼‰

ç¡®ä¿`triple_imu_rs485_publisher_dual_cam_UI.py`å·²å¯åŠ¨å¹¶å¼€å¯debugæ¨¡å¼ï¼š

```bash
cd /home/bubble/æ¡Œé¢/WIT_RS485
python triple_imu_rs485_publisher_dual_cam_UI.py \
    --online-only \
    --b-host localhost --b-port 5555 \
    --enable-video --video-host localhost --video-port 5557 \
    --enable-debug --debug-port 5560  # å…³é”®ï¼šå¼€å¯debugå‘å¸ƒ
```

### 3. å¯åŠ¨å¯è§†åŒ–UI

```bash
cd /home/bubble/æ¡Œé¢/WIT_RS485/pyqt5_viewer
./start_viewer.sh
```

æˆ–æŒ‡å®šè¿œç¨‹ä¸»æœºï¼š

```bash
./start_viewer.sh --host 192.168.1.100 --port 5560
```

---

## ğŸ–¼ï¸ UIå¸ƒå±€è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IMU 3D Visualization & Dual Camera Viewer          [_][â–¡][Ã—]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚  ğŸ“¹ Left Wrist Camera (640x480)             â”‚
â”‚  ğŸ® æ§åˆ¶é¢æ¿ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚  â”‚                                        â”‚ â”‚
â”‚  [é‡ç½®è½¨è¿¹]  â”‚  â”‚      å·¦è…•æ‘„åƒå¤´å®æ—¶ç”»é¢                 â”‚ â”‚
â”‚  [å¯¼å‡ºæ•°æ®]  â”‚  â”‚                                        â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  ğŸ“ˆ è¿è¡ŒçŠ¶æ€ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¿æ¥: ğŸŸ¢   â”‚  ğŸ“¹ Top Camera (640x480)                    â”‚
â”‚  å‘å¸ƒç‡: 20Hzâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  æ¶ˆæ¯æ•°: 1234â”‚  â”‚                                        â”‚ â”‚
â”‚  è§†é¢‘å¸§: 456 â”‚  â”‚      é¡¶éƒ¨æ‘„åƒå¤´å®æ—¶ç”»é¢                 â”‚ â”‚
â”‚  IMU: 3/3   â”‚  â”‚                                        â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š IMUå§¿æ€  â”‚  ğŸ¯ 3Dè½¨è¿¹å¯è§†åŒ–                           â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚          Zâ†‘                            â”‚ â”‚
â”‚  â”‚IMUâ”‚Râ”‚Pâ”‚Yâ”‚â”‚  â”‚          â”‚   â•±Y                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚  â”‚          â”‚ â•±                           â”‚ â”‚
â”‚  â”‚ 1 â”‚12â”‚-5â”‚â”‚â”‚  â”‚          â”‚â•±______ X                    â”‚ â”‚
â”‚  â”‚ 2 â”‚-3â”‚ 9â”‚â”‚â”‚  â”‚         â•±â”‚                            â”‚ â”‚
â”‚  â”‚ 3 â”‚ 1â”‚45â”‚â”‚â”‚  â”‚       â•±  â”‚  â—â—â—â—â—è½¨è¿¹ç‚¹                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚     â•±    â”‚  â”â”â”â”â”è·¯å¾„                  â”‚ â”‚
â”‚              â”‚  â”‚           â”‚                            â”‚ â”‚
â”‚  ğŸ¤ å¤¹çˆªçŠ¶æ€ â”‚  â”‚           â—å½“å‰ä½ç½®                     â”‚ â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  â”‚  â”‚                                        â”‚ â”‚
â”‚  60%        â”‚  â”‚  [æ—‹è½¬] [ç¼©æ”¾] [é‡ç½®è§†è§’]               â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚  ğŸ“ˆ IMUå§¿æ€æ›²çº¿ï¼ˆæœ€è¿‘100ç‚¹ï¼‰               â”‚
â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚              â”‚  â”‚   15Â°â”œâ”€â•®                              â”‚ â”‚
â”‚              â”‚  â”‚    0Â°â”œâ”€â”€â•°â”€â•®      â•­â”€â•®                 â”‚ â”‚
â”‚              â”‚  â”‚  -15Â°â”œâ”€â”€â”€â”€â”€â•°â”€â”€â”€â”€â•¯â”€â”€â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€>æ—¶é—´   â”‚ â”‚
â”‚              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¢æ¿è¯´æ˜

#### å·¦ä¾§ï¼ˆæ§åˆ¶+çŠ¶æ€ï¼‰
- **æ§åˆ¶é¢æ¿**ï¼šé‡ç½®è½¨è¿¹ã€å¯¼å‡ºæ•°æ®æŒ‰é’®
- **è¿è¡ŒçŠ¶æ€**ï¼šè¿æ¥çŠ¶æ€ã€å‘å¸ƒç‡ã€æ¶ˆæ¯è®¡æ•°ã€è§†é¢‘å¸§æ•°ã€IMUåœ¨çº¿æ•°
- **IMUå§¿æ€æ•°æ®**ï¼š3Ã—4è¡¨æ ¼æ˜¾ç¤ºroll/pitch/yaw
- **å¤¹çˆªçŠ¶æ€**ï¼šè¿›åº¦æ¡æ˜¾ç¤ºå¼€åˆåº¦
- **è¿æ¥çŠ¶æ€**ï¼š3ä¸ªIMUçš„åœ¨çº¿/ç¦»çº¿æŒ‡ç¤º

#### ä¸­é—´ï¼ˆè§†é¢‘ï¼‰
- **Left Wrist Camera**ï¼šå·¦è…•æ‘„åƒå¤´ç”»é¢ï¼ˆ640Ã—480ï¼‰
- **Top Camera**ï¼šé¡¶éƒ¨æ‘„åƒå¤´ç”»é¢ï¼ˆ640Ã—480ï¼‰

#### å³ä¾§ï¼ˆå¯è§†åŒ–ï¼‰
- **3Dè½¨è¿¹**ï¼šOpenGLæ¸²æŸ“çš„æœºæ¢°è‡‚æœ«ç«¯è½¨è¿¹ï¼ˆæœ€å¤š500ç‚¹ï¼‰
  - é¼ æ ‡å·¦é”®æ‹–åŠ¨ï¼šæ—‹è½¬è§†è§’
  - é¼ æ ‡æ»šè½®ï¼šç¼©æ”¾
  - é¼ æ ‡å³é”®æ‹–åŠ¨ï¼šå¹³ç§»
- **å®æ—¶æ›²çº¿**ï¼šIMU3çš„pitch/roll/yawæ›²çº¿ï¼ˆæœ€è¿‘100ç‚¹ï¼‰

---

## ğŸ”§ é…ç½®è¯´æ˜

### å‘½ä»¤è¡Œå‚æ•°

```bash
python imu_dual_cam_viewer.py [é€‰é¡¹]

é€‰é¡¹:
  --host <åœ°å€>    ZMQæœåŠ¡å™¨åœ°å€ï¼ˆé»˜è®¤: localhostï¼‰
  --port <ç«¯å£>    ZMQè®¢é˜…ç«¯å£ï¼ˆé»˜è®¤: 5560ï¼‰
  -h, --help      æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### æ•°æ®åè®®

ä¸»ç¨‹åºé€šè¿‡ZMQ PUB socketï¼ˆ5560ç«¯å£ï¼‰å‘å¸ƒPickleåºåˆ—åŒ–çš„æ•°æ®ï¼š

```python
{
    "timestamp": float,                    # å½“å‰æ—¶é—´æˆ³
    "imu1": {"roll": float, "pitch": float, "yaw": float},
    "imu2": {"roll": float, "pitch": float, "yaw": float},
    "imu3": {"roll": float, "pitch": float, "yaw": float},
    "position": {
        "raw": [x, y, z],                 # åŸå§‹åæ ‡(m)
        "mapped": [x, y, z]               # æ˜ å°„åæ ‡(m)
    },
    "gripper": float,                      # 0.0-1.0
    "online_status": {
        "imu1": bool,
        "imu2": bool,
        "imu3": bool
    },
    "stats": {
        "publish_count": int,
        "publish_rate": float,
        "video_frame_count": int,
        "video_latency": float
    },
    "config": {
        "L1": float,
        "L2": float,
        "yaw_mode": str
    },
    "video_left": bytes or None,          # JPEGç¼–ç çš„å·¦è…•æ‘„åƒå¤´
    "video_top": bytes or None            # JPEGç¼–ç çš„é¡¶éƒ¨æ‘„åƒå¤´
}
```

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
pyqt5_viewer/
â”œâ”€â”€ imu_dual_cam_viewer.py      # ä¸»çª—å£å’ŒZMQæ¥æ”¶çº¿ç¨‹
â”œâ”€â”€ start_viewer.sh             # å¯åŠ¨è„šæœ¬ï¼ˆè‡ªåŠ¨æ£€æŸ¥ä¾èµ–ï¼‰
â”œâ”€â”€ PYQT5_VIEWER_README.md      # æœ¬æ–‡æ¡£
â””â”€â”€ widgets/                    # UIç»„ä»¶
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ video_panel.py          # åŒæ‘„åƒå¤´æ˜¾ç¤º
    â”œâ”€â”€ imu_panel.py            # IMUæ•°æ®è¡¨æ ¼
    â”œâ”€â”€ control_panel.py        # æ§åˆ¶æŒ‰é’®å’ŒçŠ¶æ€
    â”œâ”€â”€ trajectory_3d.py        # 3Dè½¨è¿¹å¯è§†åŒ–
    â””â”€â”€ chart_panel.py          # å®æ—¶æ›²çº¿å›¾
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: UIå¯åŠ¨å¤±è´¥ï¼Œæç¤º"PyQt5æœªå®‰è£…"

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
pip3 install PyQt5
```

### é—®é¢˜2: 3Dè½¨è¿¹æ˜¾ç¤º"PyQtGraphæœªå®‰è£…"

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
pip3 install pyqtgraph PyOpenGL
```

### é—®é¢˜3: è§†é¢‘æ˜¾ç¤ºé»‘å±æˆ–"ç­‰å¾…æ•°æ®"

**æ£€æŸ¥æ¸…å•ï¼š**
1. ç¡®è®¤ä¸»ç¨‹åºå·²å¯åŠ¨å¹¶å¼€å¯`--enable-debug`
2. ç¡®è®¤è§†é¢‘æ¥æ”¶çº¿ç¨‹å·²å¯åŠ¨ï¼ˆ`--enable-video`ï¼‰
3. æ£€æŸ¥Bç«¯æ˜¯å¦æ­£å¸¸è½¬å‘è§†é¢‘ï¼ˆ5557ç«¯å£ï¼‰
4. æŸ¥çœ‹ä¸»ç¨‹åºç»ˆç«¯è¾“å‡ºï¼Œç¡®è®¤è§†é¢‘å¸§æ­£åœ¨æ¥æ”¶

**è°ƒè¯•å‘½ä»¤ï¼š**
```bash
# æµ‹è¯•ZMQè¿æ¥
python3 -c "
import zmq, pickle, time
ctx = zmq.Context()
sock = ctx.socket(zmq.SUB)
sock.connect('tcp://localhost:5560')
sock.setsockopt_string(zmq.SUBSCRIBE, '')
sock.setsockopt(zmq.RCVTIMEO, 2000)
print('ç­‰å¾…æ•°æ®...')
data = pickle.loads(sock.recv())
print('æ”¶åˆ°æ•°æ®:', data.keys())
print('è§†é¢‘å¸§:', 'video_left' in data, 'video_top' in data)
"
```

### é—®é¢˜4: UIå¡é¡¿æˆ–å»¶è¿Ÿé«˜

**ä¼˜åŒ–å»ºè®®ï¼š**
- é™ä½ä¸»ç¨‹åºdebugå‘å¸ƒé¢‘ç‡ï¼ˆä¿®æ”¹`time.sleep(0.05)`ä¸º`0.1`ï¼‰
- å‡å°‘è½¨è¿¹ç¼“å†²åŒºå¤§å°ï¼ˆä¿®æ”¹`maxlen=500`ä¸º`200`ï¼‰
- å…³é—­OpenCVçª—å£æ˜¾ç¤ºï¼ˆ`ENABLE_VIDEO_DISPLAY = False`ï¼‰

### é—®é¢˜5: è¿æ¥è¿œç¨‹ä¸»æœºå¤±è´¥

**æ£€æŸ¥æ¸…å•ï¼š**
1. ç¡®è®¤SSHéš§é“å·²å»ºç«‹ï¼ˆå¦‚æœä½¿ç”¨è·³æ¿æœºï¼‰
2. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œ5560ç«¯å£
3. æµ‹è¯•ç½‘ç»œè¿é€šæ€§ï¼š`telnet <host> 5560`

**è¿œç¨‹è¿æ¥ç¤ºä¾‹ï¼š**
```bash
# 1. å»ºç«‹SSHéš§é“ï¼ˆå¦‚æœéœ€è¦ï¼‰
ssh -L 5560:localhost:5560 user@remote-host

# 2. å¯åŠ¨UIï¼ˆè¿æ¥æœ¬åœ°è½¬å‘ç«¯å£ï¼‰
./start_viewer.sh --host localhost --port 5560
```

---

## ğŸ”„ ä¸ä¸»ç¨‹åºçš„é›†æˆ

### ä¸»ç¨‹åºä¿®æ”¹ï¼ˆå·²å®Œæˆï¼‰

åœ¨`triple_imu_rs485_publisher_dual_cam_UI.py`ä¸­ï¼š

1. **æ·»åŠ å…¨å±€å˜é‡**ï¼ˆç¬¬177-179è¡Œï¼‰ï¼š
```python
latest_video_left = None
latest_video_top = None
video_lock = threading.Lock()
```

2. **ä¿®æ”¹video_receiver_thread**ï¼ˆç¬¬335-369è¡Œï¼‰ï¼š
   - ä¿å­˜æœ€æ–°è§†é¢‘å¸§åˆ°å…¨å±€å˜é‡
   - ä½¿ç”¨`video_lock`ä¿æŠ¤å¹¶å‘è®¿é—®

3. **ä¿®æ”¹debug_publisher_thread**ï¼ˆç¬¬501-507è¡Œï¼‰ï¼š
   - è¯»å–è§†é¢‘å¸§å¹¶æ·»åŠ åˆ°`debug_data`
   - ä½¿ç”¨`send_pyobj()`å‘é€ï¼ˆæ”¯æŒbytesï¼‰

### å¯åŠ¨ä¸»ç¨‹åºï¼ˆå¿…é¡»ï¼‰

```bash
python triple_imu_rs485_publisher_dual_cam_UI.py \
    --online-only \
    --b-host localhost --b-port 5555 \
    --enable-video --video-host localhost --video-port 5557 \
    --enable-debug --debug-port 5560  # å¿…é¡»å¼€å¯debug
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æœ¬åœ°è°ƒè¯•

```bash
# Terminal 1: å¯åŠ¨ä¸»ç¨‹åº
cd /home/bubble/æ¡Œé¢/WIT_RS485
python triple_imu_rs485_publisher_dual_cam_UI.py \
    --online-only --b-host localhost --b-port 5555 \
    --enable-video --video-host localhost --video-port 5557 \
    --enable-debug

# Terminal 2: å¯åŠ¨å¯è§†åŒ–UI
cd pyqt5_viewer
./start_viewer.sh
```

### åœºæ™¯2: è¿œç¨‹ç›‘æ§

```bash
# åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œä¸»ç¨‹åºï¼ˆå‡è®¾IP: 192.168.1.100ï¼‰
python triple_imu_rs485_publisher_dual_cam_UI.py \
    --online-only --b-host <Bç«¯åœ°å€> --b-port 5555 \
    --enable-video --video-host <Bç«¯åœ°å€> --video-port 5557 \
    --enable-debug --debug-host 0.0.0.0 --debug-port 5560  # ç›‘å¬æ‰€æœ‰æ¥å£

# æœ¬åœ°å¯åŠ¨UI
cd pyqt5_viewer
./start_viewer.sh --host 192.168.1.100 --port 5560
```

### åœºæ™¯3: é€šè¿‡SSHéš§é“

```bash
# 1. å»ºç«‹SSHéš§é“
ssh -f -N -L 5560:localhost:5560 user@remote-server

# 2. å¯åŠ¨UIï¼ˆè¿æ¥æœ¬åœ°è½¬å‘ç«¯å£ï¼‰
cd pyqt5_viewer
./start_viewer.sh --host localhost --port 5560
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **UIåˆ·æ–°ç‡**ï¼š20-30 FPSï¼ˆå–å†³äºæ•°æ®å‘å¸ƒé¢‘ç‡ï¼‰
- **è§†é¢‘å»¶è¿Ÿ**ï¼š50-100msï¼ˆå–å†³äºç½‘ç»œï¼‰
- **è½¨è¿¹ç¼“å†²**ï¼šæœ€å¤š500ä¸ªç‚¹ï¼ˆçº¦25ç§’@20Hzï¼‰
- **æ›²çº¿ç¼“å†²**ï¼šæœ€è¿‘100ä¸ªç‚¹ï¼ˆçº¦5ç§’@20Hzï¼‰
- **å†…å­˜å ç”¨**ï¼š~150MBï¼ˆå«PyQt5è¿è¡Œæ—¶ï¼‰
- **CPUå ç”¨**ï¼š5-10%ï¼ˆå•æ ¸ï¼ŒIntel i5ï¼‰

---

## ğŸš§ å¾…å®ç°åŠŸèƒ½

- [ ] æ•°æ®å¯¼å‡ºï¼ˆCSV/JSONæ ¼å¼ï¼‰
- [ ] è§†é¢‘å½•åˆ¶ï¼ˆä¿å­˜åŒæ‘„åƒå¤´ç”»é¢ï¼‰
- [ ] è½¨è¿¹å›æ”¾ï¼ˆåŠ è½½å†å²æ•°æ®ï¼‰
- [ ] é…ç½®ä¿å­˜/åŠ è½½ï¼ˆè®°ä½çª—å£å¤§å°ã€å¸ƒå±€ç­‰ï¼‰
- [ ] æš‚åœ/æ¢å¤æ•°æ®æ›´æ–°
- [ ] æˆªå›¾åŠŸèƒ½ï¼ˆä¿å­˜å½“å‰UIçŠ¶æ€ï¼‰
- [ ] è‡ªå®šä¹‰æ›²çº¿é€‰æ‹©ï¼ˆæ˜¾ç¤ºIMU1/2/3ä»»æ„ç»„åˆï¼‰

---

## ğŸ’¡ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„Widget

1. åœ¨`widgets/`ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶ï¼š
```python
# widgets/my_widget.py
from PyQt5.QtWidgets import QWidget, QVBoxLayout, QLabel

class MyWidget(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()
    
    def init_ui(self):
        layout = QVBoxLayout(self)
        self.label = QLabel("My Custom Widget")
        layout.addWidget(self.label)
    
    def update_data(self, data):
        # å¤„ç†æ•°æ®æ›´æ–°
        pass
```

2. åœ¨ä¸»çª—å£ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ï¼š
```python
# imu_dual_cam_viewer.py
from widgets.my_widget import MyWidget

# åœ¨init_ui()ä¸­æ·»åŠ 
self.my_widget = MyWidget()
layout.addWidget(self.my_widget)

# åœ¨on_data_received()ä¸­æ›´æ–°
self.my_widget.update_data(data)
```

### ä¿®æ”¹æ•°æ®åè®®

å¦‚æœä¸»ç¨‹åºä¿®æ”¹äº†æ•°æ®æ ¼å¼ï¼Œåªéœ€è°ƒæ•´`on_data_received()`æ–¹æ³•ä¸­çš„è§£æé€»è¾‘ï¼Œæ— éœ€ä¿®æ”¹å…¶ä»–ä»£ç ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **GitHub Issues**: [æŠ¥å‘ŠBugæˆ–æå»ºè®®]
- **æ–‡æ¡£**: æœ¬README.md
- **ä»£ç ä½ç½®**: `/home/bubble/æ¡Œé¢/WIT_RS485/pyqt5_viewer/`

---

## ğŸ“„ è®¸å¯è¯

ä¸ä¸»ç¨‹åºç›¸åŒçš„è®¸å¯è¯ï¼ˆå¦‚æœæœ‰ï¼‰

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’æŸ¥ç« èŠ‚æˆ–è”ç³»å¼€å‘è€…ã€‚**
